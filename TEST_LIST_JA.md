# テストリスト (TDD)

以下は、本リポジトリの機能およびREADMEに記載されたTODO項目をもとに整理した、TDD向けのテストリストです。

1. ~~**システム音声のキャプチャ**~~
   - `audio_capture_worker` が指定デバイスから音声を取得し、キューへ正しくデータを投入するかテストする。（完了）

2. **Voskによる音声認識**
   - `SpeechRecognizer.process()` で音声データを渡した際、最終結果(`Result`)と部分結果(`PartialResult`)が適切に取得されるか確認する。

3. **キャプション更新のリアルタイム性**
   - `recognize_worker` がキューから音声を取り出し、`CaptionWindow.update_caption()` を即座に呼び出すか検証する。

4. **Partial処理中の低遅延表示**
   - 認識中の部分テキストが連続して取得できる状況をシミュレートし、画面表示が逐次更新されるかテストする。

5. **ウィンドウの常時最前面表示**
   - `CaptionWindow` が生成されたとき、`WindowStaysOnTopHint` フラグの有無を確認する。

6. **レイアウト変更キー操作**
   - スペースキー押下で `layout_mode` が循環し、ウィンドウ位置が正しく変化するかテストする。

7. **透過モード切り替え**
   - `T` キー押下で `transparency` フラグがトグルされ、ウィンドウの透明度が変更されるか確認する。

8. **ウィンドウドラッグの動作**
   - マウス操作をシミュレートし、ドラッグ開始から移動までの座標計算が正しいか検証する。

9. **Ctrl+C二度押しによる安全終了**
   - `handle_sigint` が一度目で警告を出し、二度目で `stop_event` をセットしてアプリ終了処理へ進むかテストする。

10. **テスト未実装機能の計画**
    - READMEのTODOに挙がっている以下の機能について、それぞれの動作を前提としたテストケースを事前に設計しておく。
        - デバイスマイクの切り替え
        - キャプションスタイル変更
        - 複数行表示や折り返し
        - 別音声認識エンジン対応
        - 多言語キャプション
        - 位置・サイズ調整GUI
        - クリック透過
        - フェードアウト／自動非表示
